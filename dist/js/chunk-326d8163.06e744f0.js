(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-326d8163"],{"0507":function(t,e,a){},"0ee9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-field",{attrs:{label:t.label,type:t.errorType,message:t.errorMessage}},[a("b-select",{attrs:{placeholder:t.placeholder,expanded:""},model:{value:t.innerValue,callback:function(e){t.innerValue=e},expression:"innerValue"}},[a("option",{attrs:{value:""}},[t._v(t._s(t.placeholder))]),t._l(t.list,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1)},r=[],s={name:"AtomSelectInput",props:{placeholder:{type:String,default:"Select anything from list"},list:{type:Array,default:null},errorMessage:{type:Array,default:null},errorType:{type:Object,default:null},label:{type:String},value:{type:null}},emits:["input"],data:function(){return{innerValue:""}},watch:{innerValue:function(t){console.log("select",t),this.$emit("input",t),this.$emit("changed",t)},value:function(t){this.innerValue=t}},created:function(){this.value&&(this.innerValue=this.value)}},o=s,i=a("2877"),l=Object(i["a"])(o,n,r,!1,null,null,null);e["a"]=l.exports},bf19:function(t,e,a){"use strict";var n=a("23e7");n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},db32:function(t,e,a){"use strict";var n=a("0507"),r=a.n(n);r.a},f43e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TemplateInventory",{attrs:{lists:t.spotDetails,isLoading:t.isLoading},on:{updateRequest:t.updateRequest,toSrp:t.toSrp}})},r=[],s=(a("d3b7"),a("96cf"),a("1da1")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-wrap"},[a("b-table",{attrs:{data:t.isEmpty?[]:t.lists,bordered:!0,hoverable:!0,loading:t.isLoading,focusable:!0,"mobile-cards":t.hasMobileCards,scrollable:!0,"sticky-header":!0,height:"800"},scopedSlots:t._u([{key:"empty",fn:function(){return[a("div",{staticClass:"has-text-centered"},[t._v("No records")])]},proxy:!0}])},[a("b-table-column",{attrs:{field:"ID",label:"ID",width:"40",numeric:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.ID)+" ")]}}])}),a("b-table-column",{attrs:{field:"CreatedAt",label:"Date",centered:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"tag is-success"},[t._v(" "+t._s(new Date(e.row.CreatedAt).toLocaleDateString())+" ")])]}}])}),a("b-table-column",{attrs:{field:"Priority",label:"Priority",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"tag",class:{"is-low":1===e.row.Priority,"is-medium":2===e.row.Priority,"is-high":3===e.row.Priority}},[t._v(" "+t._s(t.getPriority(e.row.Priority))+" ")])]}}])}),a("b-table-column",{attrs:{field:"contact",label:"Contact Details"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(" Name: "),a("strong",[t._v(t._s(e.row.Name))])]),a("p",[t._v(" Mobile: "),a("strong",[t._v(t._s(e.row.Mobile))])]),a("p",[t._v(" Email: "),a("strong",[t._v(t._s(e.row.EmailID))])]),a("p",[t._v(" Landmark : "),a("strong",[t._v(t._s(e.row.Landmark))])]),a("p",[t._v(" City: "+t._s(e.row.City)+" ")]),a("p",[t._v(" Duration : "+t._s(e.row.Duration)+" ")]),a("p",[t._v(" Car Model: "+t._s(e.row.CarModel)+" ")])]}}])}),a("b-table-column",{attrs:{field:"comments",label:"Comments"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("AtomTextarea",{staticClass:"comment-width",attrs:{value:e.row.Comments},on:{changed:function(a){var n=arguments.length,r=Array(n);while(n--)r[n]=arguments[n];return t.onCommentUpdate.apply(void 0,[e.row].concat(r))}}})]}}])}),a("b-table-column",{attrs:{field:"NextCall",label:"Status/Next Call",width:"100px",sortable:"",searchable:""},scopedSlots:t._u([{key:"searchable",fn:function(e){return[a("AtomSelectInput",{staticClass:"column-width",attrs:{list:t.statusList},model:{value:e.filters["Status"],callback:function(a){t.$set(e.filters,"Status",a)},expression:"props.filters['Status']"}})]}},{key:"default",fn:function(e){return[a("span",{staticClass:"tag is-warning"},[t._v(" "+t._s(t.statusList[e.row.Status].name)+" ")]),a("AtomSelectInput",{staticClass:"column-width",attrs:{list:t.statusList},on:{changed:function(a){var n=arguments.length,r=Array(n);while(n--)r[n]=arguments[n];return t.onStatusUpdate.apply(void 0,[e.row].concat(r))}}}),a("span",{staticClass:"tag is-warning",class:{"is-danger":t.getStatus(e.row.NextCall)}},[a("span",[t._v(" "+t._s(t.getStatus(e.row.NextCall)?"delayed ":"upcoming ")+" ")]),a("strong",[t._v(" "+t._s(new Date(e.row.NextCall).toLocaleDateString())+" ")])]),a("AtomDatePicker",{staticClass:"column-width",on:{changed:function(a){var n=arguments.length,r=Array(n);while(n--)r[n]=arguments[n];return t.onDateUpdate.apply(void 0,[e.row].concat(r))}}})]}}])}),a("b-table-column",{attrs:{field:"UpdatedAt",label:"Last Updated",centered:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"tag is-success"},[t._v(" "+t._s(new Date(e.row.UpdatedAt).toLocaleDateString())+" ")])]}}])}),a("b-table-column",{attrs:{field:"lat_lng",label:"Lat/Lng"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{target:"_blank"},on:{click:function(a){return t.toSrp(e.row.Latitude,e.row.Longitude)}}},[t._v(" "+t._s(e.row.Latitude.toFixed(6)+"/"+e.row.Longitude.toFixed(6))+" ")]),a("p",[t._v("Lat :")]),a("AtomInput",{attrs:{value:e.row.Latitude.toFixed(6)},on:{changed:function(a){var n=arguments.length,r=Array(n);while(n--)r[n]=arguments[n];return t.updateLat.apply(void 0,[e.row].concat(r))}}}),a("p",[t._v("Lng :")]),a("AtomInput",{attrs:{value:e.row.Longitude.toFixed(6)},on:{changed:function(a){var n=arguments.length,r=Array(n);while(n--)r[n]=arguments[n];return t.updateLng.apply(void 0,[e.row].concat(r))}}})]}}])})],1)],1)},i=[],l=(a("25f0"),a("bf19"),a("bf75")),u=a("0ee9"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-field",[a("b-datepicker",{attrs:{placeholder:"Click to select..."},on:{input:t.onChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)},d=[],p={name:"AtomDatePicker",props:{assignedDate:{type:Date}},emits:["changed"],data:function(){return{date:new Date}},methods:{onChange:function(t){this.$emit("changed",t)}}},m=p,f=a("2877"),g=Object(f["a"])(m,c,d,!1,null,null,null),h=g.exports,b=a("8bf9"),v={name:"TemplateInventory",components:{AtomTextarea:l["a"],AtomSelectInput:u["a"],AtomDatePicker:h,AtomInput:b["a"]},props:{lists:{type:Array},isLoading:{type:Boolean}},emits:["updateRequest","toSrp"],data:function(){return{isEmpty:!1,isBordered:!1,isStriped:!1,isNarrowed:!1,isHoverable:!1,isFocusable:!1,hasMobileCards:!0,statusList:[{id:0,name:"StatusNotSet"},{id:1,name:"Registered"},{id:2,name:"Processing"},{id:3,name:"SpotSuggested"},{id:4,name:"SpotAccepted"},{id:5,name:"SpotDenied"},{id:6,name:"Archive"}],model:{comments:"",status:"",nextCall:""}}},methods:{getPriority:function(t){switch(t){case 1:return"Low";case 2:return"Medium";case 3:return"High"}},getStatus:function(t){return(new Date).getTime()>new Date(t).getTime()},onDateUpdate:function(t,e){t["NextCall"]=e.toJSON(),this.$emit("updateRequest",t)},onCommentUpdate:function(t,e){t["Comments"]!==e&&(t["Comments"]=e,this.$emit("updateRequest",t))},onStatusUpdate:function(t,e){t["Status"]=e,this.$emit("updateRequest",t)},updateLat:function(t,e){t["Latitude"].toString()!==parseFloat(e).toString()&&(t["Latitude"]=parseFloat(e),this.$emit("updateRequest",t))},updateLng:function(t,e){t["Longitude"].toString()!==parseFloat(e).toString()&&(t["Longitude"]=parseFloat(e),this.$emit("updateRequest",t))},toSrp:function(t,e){this.$emit("toSrp",t,e)}}},w=v,y=(a("db32"),Object(f["a"])(w,o,i,!1,null,"d23767c6",null)),_=y.exports,S={name:"PageInventory",components:{TemplateInventory:_},data:function(){return{spotDetails:[],isLoading:!1}},created:function(){this.getSpotDetails()},methods:{getSpotDetails:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,fetch("https://maya.parkspot.in/internal/parking-requests");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t.spotDetails=n,t.isLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},updateRequest:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isLoading=!0,a.next=4,fetch("https://maya.parkspot.in/owner/request-comments",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return n=a.sent,a.next=7,n.json();case 7:e.$buefy.toast.open({message:"Sucessfully updated!",type:"is-success",duration:2e3}),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.error({error:a.t0}),e.$buefy.toast.open({message:"Something went wrong!",type:"is-danger",duration:2e3});case 14:e.isLoading=!1;case 15:case"end":return a.stop()}}),a,null,[[0,10]])})))()},toSrp:function(t,e){var a=this.$router.resolve({name:"srp",query:{lat:t,lng:e}});window.open(a.href,"_blank")}}},L=S,C=Object(f["a"])(L,n,r,!1,null,null,null);e["default"]=C.exports}}]);