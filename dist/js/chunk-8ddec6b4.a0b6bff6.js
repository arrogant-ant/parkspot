(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ddec6b4"],{"0ee9":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-field",{attrs:{label:t.label,type:t.errorType,message:t.errorMessage}},[n("b-select",{attrs:{placeholder:t.placeholder,expanded:""},model:{value:t.innerValue,callback:function(e){t.innerValue=e},expression:"innerValue"}},[n("option",{attrs:{value:""}},[t._v(t._s(t.placeholder))]),t._l(t.list,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1)},r=[],o={name:"AtomSelectInput",props:{placeholder:{type:String,default:"Select anything from list"},list:{type:Array,default:null},errorMessage:{type:Array,default:null},errorType:{type:Object,default:null},label:{type:String},value:{type:null}},emits:["input"],data:function(){return{innerValue:""}},watch:{innerValue:function(t){this.$emit("input",t),this.$emit("changed",t)},value:function(t){this.innerValue=t}},created:function(){this.value&&(this.innerValue=this.value)}},s=o,i=n("2877"),l=Object(i["a"])(s,a,r,!1,null,null,null);e["a"]=l.exports},1550:function(t,e,n){},"2b30":function(t,e,n){"use strict";var a=n("1550"),r=n.n(a);r.a},bf19:function(t,e,n){"use strict";var a=n("23e7");a({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},f43e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("TemplateInventory",{attrs:{lists:t.spotDetails,isLoading:t.isLoading},on:{updateRequest:t.updateRequest,toSrp:t.toSrp}})},r=[],o=(n("d3b7"),n("96cf"),n("1da1")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"custom-wrap"},[n("b-table",{attrs:{data:t.isEmpty?[]:t.lists,bordered:!0,hoverable:!0,loading:t.isLoading,focusable:!0,"mobile-cards":t.hasMobileCards,scrollable:!0,"sticky-header":!0,height:"800"},scopedSlots:t._u([{key:"empty",fn:function(){return[n("div",{staticClass:"has-text-centered"},[t._v("No records")])]},proxy:!0}])},[n("b-table-column",{attrs:{field:"ID",label:"ID",width:"40",numeric:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.ID)+" ")]}}])}),n("b-table-column",{attrs:{field:"CreatedAt",label:"Date",centered:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"tag is-success"},[t._v(" "+t._s(new Date(e.row.CreatedAt).toLocaleDateString())+" ")])]}}])}),n("b-table-column",{attrs:{field:"Priority",label:"Priority",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"tag",class:{"is-low":1===e.row.Priority,"is-medium":2===e.row.Priority,"is-high":3===e.row.Priority}},[t._v(" "+t._s(t.getPriority(e.row.Priority))+" ")])]}}])}),n("b-table-column",{attrs:{field:"contact",label:"Contact Details"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("p",[t._v(" Name: "),n("strong",[t._v(t._s(e.row.Name))])]),n("p",[t._v(" Mobile: "),n("strong",[t._v(t._s(e.row.Mobile))])]),n("p",[t._v(" Email: "),n("strong",[t._v(t._s(e.row.EmailID))])]),n("p",[t._v(" Landmark : "),n("strong",[t._v(t._s(e.row.Landmark))])]),n("p",[t._v("City: "+t._s(e.row.City))]),n("p",[t._v("Duration : "+t._s(e.row.Duration))]),n("p",[t._v("Car Model: "+t._s(e.row.CarModel))])]}}])}),n("b-table-column",{attrs:{field:"comments",label:"Comments"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("AtomTextarea",{staticClass:"custom-colComment",attrs:{value:e.row.Comments},on:{changed:function(n){var a=arguments.length,r=Array(a);while(a--)r[a]=arguments[a];return t.onCommentUpdate.apply(void 0,[e.row].concat(r))}}})]}}])}),n("b-table-column",{attrs:{field:"NextCall",label:"Status/Next Call",width:"100px",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"tag is-warning"},[t._v(" "+t._s(t.statusList[e.row.Status].name)+" ")]),n("AtomSelectInput",{staticClass:"custom-columnWidth",attrs:{list:t.statusList},on:{changed:function(n){var a=arguments.length,r=Array(a);while(a--)r[a]=arguments[a];return t.onStatusUpdate.apply(void 0,[e.row].concat(r))}}}),n("span",{staticClass:"tag is-warning",class:{"is-danger":t.getStatus(e.row.NextCall)}},[n("span",[t._v(" "+t._s(t.getStatus(e.row.NextCall)?"delayed ":"upcoming ")+" ")]),n("strong",[t._v(" "+t._s(new Date(e.row.NextCall).toLocaleDateString())+" ")])]),n("AtomDatePicker",{staticClass:"custom-columnWidth",on:{changed:function(n){var a=arguments.length,r=Array(a);while(a--)r[a]=arguments[a];return t.onDateUpdate.apply(void 0,[e.row].concat(r))}}})]}}])}),n("b-table-column",{attrs:{field:"UpdatedAt",label:"Last Updated",centered:"",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"tag is-success"},[t._v(" "+t._s(new Date(e.row.UpdatedAt).toLocaleDateString())+" ")])]}}])}),n("b-table-column",{attrs:{field:"lat_lng",label:"Lat/Lng"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{target:"_blank"},on:{click:function(n){return t.toSrp(e.row.Latitude,e.row.Longitude)}}},[t._v(" "+t._s(e.row.Latitude.toFixed(6)+"/"+e.row.Longitude.toFixed(6))+" ")]),n("p",[t._v("Lat :")]),n("AtomInput",{on:{changed:function(n){var a=arguments.length,r=Array(a);while(a--)r[a]=arguments[a];return t.updateLat.apply(void 0,[e.row].concat(r))}}}),n("p",[t._v("Lng :")]),n("AtomInput",{on:{changed:function(n){var a=arguments.length,r=Array(a);while(a--)r[a]=arguments[a];return t.updateLng.apply(void 0,[e.row].concat(r))}}})]}}])})],1)],1)},i=[],l=(n("bf19"),n("bf75")),u=n("0ee9"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-field",[n("b-datepicker",{attrs:{placeholder:"Click to select..."},on:{input:t.onChange},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)},d=[],p={name:"AtomDatePicker",props:{assignedDate:{type:Date}},emits:["changed"],data:function(){return{date:new Date}},methods:{onChange:function(t){this.$emit("changed",t)}}},m=p,f=n("2877"),g=Object(f["a"])(m,c,d,!1,null,null,null),h=g.exports,b=n("8bf9"),v={name:"TemplateInventory",components:{AtomTextarea:l["a"],AtomSelectInput:u["a"],AtomDatePicker:h,AtomInput:b["a"]},props:{lists:{type:Array},isLoading:{type:Boolean}},emits:["updateRequest","toSrp"],data:function(){return{isEmpty:!1,isBordered:!1,isStriped:!1,isNarrowed:!1,isHoverable:!1,isFocusable:!1,hasMobileCards:!0,statusList:[{id:1,name:"StatusNotSet"},{id:2,name:"Registered"},{id:3,name:"Processing"},{id:4,name:"SpotSuggested"},{id:5,name:"SpotAccepted"},{id:6,name:"SpotDenied"},{id:7,name:"Archive"}],priorityList:[{id:1,name:"Not Set"},{id:2,name:"Low"},{id:3,name:"Medium"},{id:4,name:"High"}],model:{comments:"",status:"",nextCall:""}}},methods:{getPriority:function(t){switch(t){case 1:return"Low";case 2:return"Medium";case 3:return"High"}},getStatus:function(t){return(new Date).getTime()>new Date(t).getTime()},onDateUpdate:function(t,e){t["NextCall"]=e.toJSON(),this.$emit("updateRequest",t)},onCommentUpdate:function(t,e){t["Comments"]!==e&&(t["Comments"]=e,this.$emit("updateRequest",t))},onStatusUpdate:function(t,e){t["Status"]=e-1,this.$emit("updateRequest",t)},updateLat:function(t,e){t["Latitude"]=parseInt(e),this.$emit("updateRequest",t)},updateLng:function(t,e){t["Longitude"]=parseInt(e),this.$emit("updateRequest",t)},toSrp:function(t,e){this.$emit("toSrp",t,e)}}},y=v,w=(n("2b30"),Object(f["a"])(y,s,i,!1,null,"3fb742cc",null)),_=w.exports,S={name:"PageInventory",components:{TemplateInventory:_},data:function(){return{spotDetails:[],isLoading:!1}},created:function(){this.getSpotDetails()},methods:{getSpotDetails:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,fetch("https://maya.parkspot.in/internal/parking-requests");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t.spotDetails=a,t.isLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},updateRequest:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.isLoading=!0,n.next=4,fetch("https://maya.parkspot.in/owner/request-comments",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=n.sent,n.next=7,a.json();case 7:e.$buefy.toast.open({message:"Sucessfully updated!",type:"is-success",duration:2e3}),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](0),console.error({error:n.t0}),e.$buefy.toast.open({message:"Something went wrong!",type:"is-danger",duration:2e3});case 14:e.isLoading=!1;case 15:case"end":return n.stop()}}),n,null,[[0,10]])})))()},toSrp:function(t,e){var n=this.$router.resolve({name:"srp",query:{lat:t,lng:e}});window.open(n.href,"_blank")}}},C=S,L=Object(f["a"])(C,a,r,!1,null,null,null);e["default"]=L.exports}}]);